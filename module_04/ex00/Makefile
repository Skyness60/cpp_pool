COMP = c++
CFLAG = -Wall -Werror -Wextra -g3 -std=c++98

NAME = Polymorphism

SRC =	Animal.cpp \
		Cat.cpp \
		Dog.cpp \
		WrongAnimal.cpp \
		WrongCat.cpp \
		main.cpp


OBJ = $(SRC:.cpp=.o)

all: $(NAME)
	@echo "\033[32mðŸ’¥ Compilation terminÃ©e avec succÃ¨s ! ðŸ’¥\033[0m"
	@echo "\033[33mðŸ”¨ Le projet est prÃªt Ã  Ãªtre utilisÃ© ! ðŸŽ‰\033[0m"

$(NAME): $(OBJ)
	@echo "\033[1;33mðŸ”§ Liaison des fichiers objets en un exÃ©cutable...\033[0m"
	@$(MAKE) -s progress_bar
	@$(COMP) $(CFLAG) $(OBJ) -o $(NAME)
	@$(MAKE) -s done
	@echo "\033[32mðŸš€ GÃ©nÃ©ration de $(NAME) terminÃ©e !\033[0m"

%.o: %.cpp
	@$(MAKE) -s progress_bar
	@echo "\033[1;34mðŸ“‚ Compilation de $< en $@...\033[0m"
	@$(COMP) $(CFLAG) -c $< -o $@
	@$(MAKE) -s done
	@echo "\033[32mâœ… $< compilÃ© avec succÃ¨s !\033[0m"

clean:
	@echo "\033[1;31mðŸ§¹ Suppression des fichiers objets...\033[0m"
	@rm -f $(OBJ)
	@echo "\033[32mðŸ—‘ï¸ Fichiers objets supprimÃ©s.\033[0m"

fclean: clean
	@echo "\033[1;31mðŸ”¥ Suppression de l'exÃ©cutable $(NAME)...\033[0m"
	@rm -f $(NAME)
	@echo "\033[32mðŸ”¥ $(NAME) supprimÃ©.\033[0m"

re: fclean all

progress_bar:
	@echo -n "\033[1;34mâ³ Chargement"
	@for i in $(shell seq 1 10); do \
		sleep 0.1; \
		echo -n "."; \
	done
	@echo "\033[0m"

done:
	@echo -n "\033[1;32mâœ… "
	@for i in $(shell seq 1 3); do \
		sleep 0.2; \
		echo -n "."; \
	done
	@echo " terminÃ© !\033[0m"


.PHONY: all clean fclean re progress_bar done dev
